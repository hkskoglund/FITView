<!DOCTYPE html>
<!-- Basert pÃ¥ http://www.html5rocks.com/en/tutorials/file/dndfiles/#toc-selecting-files-dnd -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>.FITview</title>

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDvei58o_T1ViClyqpY9728ob_RhbhbiRg&sensor=false"></script>
    <script src="Scripts/lib/jquery-2.0.0.js"></script>
    <script src="Scripts/lib/knockout-2.2.1.debug.js"></script>
    <script src="Scripts/lib/knockout.mapping-latest.debug.js"></script>
    <script src="Scripts/lib/modernizr-2.6.2.js"></script>
    <!-- <script src="Scripts/lib/highcharts.src.js"></script>-->
    <script src="Scripts/lib/highcharts.src.js"></script>
    <script src="Scripts/lib/highcharts-more.src.js"></script>
    <script src="Scripts/lib/moment.js"></script>
    <script src="Scripts/lib/moment.isocalendar.js"></script>

    <script src="Scripts/FITCRCTimestampUtility.js"></script>
    <script src="Scripts/Messages/FITActivityFile.js"></script>

    <script defer="defer" src="Scripts/FITView.js"></script> <!-- Loading everything before with start.... -->

    <link href="Stylesheets/dropdownmenu.css" rel="stylesheet" />
    <link href="Stylesheets/StyleMain.css" rel="stylesheet" />
    <link rel="shortcut icon" href="/favicon.ico"/>
</head>

<body id="body">

    <div>

        <div id="divSessionLap">

          <!--   <div data-bind="text: ko.toJSON($root.sessionVM)"></div> -->

            <nav>

                <ul class="menu">


                   

                    <li><a href="#">.FITview</a>

                        <ul>
                            <li><a href="#">
                                <input id="inpFITFile" type="file" multiple="multiple" title="Import activity/setting/sport setting .FIT files" />

                                <progress class="FITprogressImport" id="progressFITimport" max="100" data-bind="value: progressVM.progress"></progress>

                            </a>
                            </li>
                            <!--<li><a data-bind="click: getLatestActivitiesFromGC">
                               
                                <img class="inlineIcon" src="Images/database-import.png" />
                                <span style="margin-left:2px" title="Tries to fetch the lastest activities from Garmin Connect with credentials specified in settings">Get latest activities from Garmin Connect</span>
                            </a>
                            </li>-->
                            <li>
                                <a href="https://github.com/hkskoglund">Source code on github.com</a>
                            </li>
                        </ul>
                    </li>

                    <!-- ko with: sessionVM -->

                    <li id="liSessions" style="display: none" data-bind="visible: timestamp().length > 0"><a href="#">Sessions</a>

                        <ul style="max-height: 300px; overflow-y: auto; overflow-x: hidden" data-bind="foreach: timestamp">

                            <li data-bind="with: $parent">

                               

                                <a href="#" data-bind="click: showSession.bind($index())">

                                    

                                    <!-- ko if: sport()[$index()] === 1 -->
                                    <img class="sessionSport" alt="Running" title="Running" src="Images/sport/running.png" />
                                    <!-- /ko -->

                                    <!-- ko if: sport()[$index()] === 2 -->
                                    <img class="sessionSport" alt="Cycling" title="Cycling" src="Images/sport/cycling.png" />
                                    <!-- /ko -->

                                    <!-- ko if: sport()[$index()] === 5 -->
                                    <img class="sessionSport" alt="Swimming" title="Swimming" src="Images/sport/swimming.png" />
                                    <!-- /ko -->

                                    <!-- ko if: sport()[$index()] === 0 -->
                                    <img class="sessionSport" alt="Generic" title="Generic" src="Images/sport/generic.png" />
                                    <!-- /ko -->

                                    <!-- ko if: typeof total_elapsed_time !== "undefined" && total_elapsed_time().length > 0  -->
                                    <span class="sessionHHMMSS" title="Total elapsed time (includes pauses)" data-bind="text: total_elapsed_time()[$index()].toHHMMSS()"></span>
                                    <!-- /ko -->

                                    <!-- ko if: typeof total_distance !== "undefined" && total_distance().length > 0 -->
                                    <span class="sessionTOTALDISTANCE" title="Total distance" data-bind="text: total_distance()[$index()].toFixed(0)"></span>
                                    <!-- /ko -->

                                    <!-- Session trigger -->

                                    <!-- ko if: trigger()[$index()] === 0 -->
                                    <img class="sessionTrigger" src="Images/sessiontrigger/activity_end.png" title="Activity end" />
                                    <!-- /ko -->

                                    <!-- ko if: trigger()[$index()] === 1 -->
                                    <img class="sessionTrigger" src="Images/sessiontrigger/manual.png" title="User changed sport (MODE)" />
                                    <!-- /ko -->

                                    <!-- ko if: trigger()[$index()] === 2 -->
                                    <img class="sessionTrigger" src="Images/sessiontrigger/auto_multi_sport.png" title="Auto multi-sport feature is enabled and user pressed LAP button to advance session" />
                                    <!-- /ko -->

                                    <!-- ko if: trigger()[$index()] === 3 -->
                                    <img class="sessionTrigger" src="Images/sessiontrigger/fitness_equipment.png" title="Auto sport change caused by user linking to fitness equipment" />
                                    <!-- /ko -->

                                    <!-- /ko -->

                                </a>

                            </li>
                        </ul>

                    </li>

                    <!-- /ko -->

                    <!-- ko with: lapVM -->

                    <li id="liLaps" style="display: none" data-bind="visible: timestamp().length > 0"><a href="#">Laps</a>

                        <ul style="max-height: 300px; overflow-y: scroll; overflow-x: scroll" data-bind="foreach: timestamp">

                            <li data-bind="with: $parent">

                                <a href="#" data-bind="click: showLap.bind($index())">

                                    <!-- ko if: sport()[$index()] === 1 -->
                                    <img class="lapSport" src="Images/sport/running.png" title="Running" alt="Running" />
                                    <!-- /ko -->

                                    <!-- ko if:  sport()[$index()] === 2 -->
                                    <img class="lapSport" src="Images/sport/cycling.png" title="Cycling" alt="Cycling" />
                                    <!-- /ko -->

                                    <!-- ko if:  sport()[$index()] === 5 -->
                                    <img class="lapSport" src="Images/sport/swimming.png" title="Swimming" alt="Swimming" />
                                    <!-- /ko -->

                                     <!-- ko if: sport()[$index()] === 0 -->
                                    <img class="lapSport" alt="Generic" title="Generic" src="Images/sport/generic.png" />
                                    <!-- /ko -->

                                   <!--  http://gpsinformation.net/main/gpstime.htm-->
                                    <!-- ko if: typeof total_timer_time !== "undefined" &&  total_timer_time().length > 0 -->
                                    <time><span class="lapHHMMSS" data-bind="text: total_timer_time()[$index()].toHHMMSS(), attr: { title: 'Total timer time (excludes pauses), difference from total elapsed time (includes pauses - probably based on received GPS time that gives UTC time in FIT timestamps) is ' + (total_elapsed_time()[$index()].value - total_timer_time()[$index()].value).toFixed(2) + ' s' }"></span></time>
                                    <!-- /ko -->

                                    <!-- ko if: typeof total_elapsed_time !== "undefined" && total_elapsed_time().length > 0  && 
                                        typeof total_timer_time !== "undefined" && typeof total_timer_time()[$index()] !== "undefined" && typeof total_elapsed_time()[$index()] !== "undefined" &&
                                        Math.abs(total_elapsed_time()[$index()].value - total_timer_time()[$index()].value) >= 1 -->
                                    <time><span class="lapHHMMSS" title="Total elapsed time (includes pauses)" data-bind="text: total_elapsed_time()[$index()].toHHMMSS()"></span></time>
                                    <!-- /ko -->

                                    <!-- ko if: typeof total_distance !== "undefined" && total_distance().length > 0 -->
                                    <span class="lapTOTALDISTANCE" title="Total distance" data-bind="text: total_distance()[$index()].toFixed(0)"></span>
                                    <!-- /ko -->

                                    <!-- SPEED -->

                                    <!-- ko if: avg_speed()[$index()]  || max_speed()[$index()]  -->
                                    <img class="inlineIcon" alt="Speed" title="Speed" src="Images/speed.png" />
                                    <!-- /ko -->


                                    <!-- BIKING/GENERIC -->
                                    <!-- ko if: sport()[$index()] === 2 || sport()[$index()] === 0 || (sport()[$index()] === 1 && $root.speedMode() === 2)-->


                                    <!-- ko if: avg_speed()[$index()] -->
                                    <span title="Average speed" data-bind="text: avg_speed()[$index()].toKMprH()"></span>
                                    <!-- /ko -->

                                    <!-- ko if: max_speed()[$index()]  -->
                                    <span title="Max speed" data-bind="text: max_speed()[$index()].toKMprH()"></span>
                                    <!-- /ko -->
                                    <!-- /ko -->

                                    <!-- RUNNING -->

                                    <!-- ko if: sport()[$index()] === 1  && !((sport()[$index()] === 1 && $root.speedMode() === 2)) -->

                                    <!-- ko if: avg_speed()[$index()] -->
                                    <span title="Average speed" data-bind="text: avg_speed()[$index()].toMINprKM()"></span>
                                    <!-- /ko -->

                                    <!-- ko if: max_speed()[$index()] -->
                                    <span title="Max speed" data-bind="text: max_speed()[$index()].toMINprKM()"></span>
                                    <!-- /ko -->
                                    <!-- /ko -->

                                    <!-- SWIMMING TO DO .... -->

                                    <!-- ko if: sport()[$index()] === 5  -->

                                    <!-- ko if: avg_speed()[$index()] -->
                                    <span title="Average speed" data-bind="text: avg_speed()[$index()].toMINpr100M()"></span>
                                    <!-- /ko -->

                                    <!-- ko if: max_speed()[$index()] -->
                                    <span title="Max speed" data-bind="text: max_speed()[$index()].toMINpr100M()"></span>
                                    <!-- /ko -->
                                    <!-- /ko -->

                                    <!-- HEART RATE -->

                                    <!-- ko if: avg_heart_rate()[$index()] ||  max_heart_rate()[$index()] -->
                                    <img class="inlineIcon" alt="heartrate" title="Heart rate (bpm)" src="Images/heart.png" />
                                    <!-- /ko -->


                                    <!-- ko if:  avg_heart_rate()[$index()]  >= 0 -->
                                    <span title="Average heart rate (bpm)" data-bind="text: avg_heart_rate()[$index()]"></span>
                                    <!-- /ko -->

                                    <!-- ko if: max_heart_rate()[$index()] >= 0 -->
                                    <span title="Max heart rate (bpm)" data-bind="text: max_heart_rate()[$index()]"></span>
                                    <!-- /ko -->

                                    <!-- Calories -->

                                    <!-- ko if: total_calories()[$index()] > 0 || total_fat_calories()[$index] > 0-->
                                        <img class="inlineIcon" alt="kilo calorie" title="kcal" src="Images/kcalorie.png" />

                                        <span title="Total calories (kcal)" data-bind="text: total_calories()[$index()]"></span>
                                    <!-- ko if: total_timer_time()[$index()].value > 0 -->
                                     <img class="inlineIcon" alt="Watt (J/s)" title="Watt (J/s)" src="Images/watt.png" />
                                       <span title="Watt" data-bind="text: ((total_calories()[$index()]  )* 1000 * 4.1868 / total_timer_time()[$index()].value).toFixed(1)"></span>
                                     <!-- /ko -->
                                      <!-- ko if: typeof total_fat_calories()[$index()] !== "undefined" && total_fat_calories()[$index()] > 0 -->
                                            <span title="Total fat calories (kcal)" data-bind="text: total_fat_calories()[$index()]"></span>
                                    <img class="inlineIcon" alt="Watt (J/s)" title="Watt (J/s)" src="Images/watt.png" />
                                       <span title="Watt" data-bind="text: ((total_fat_calories()[$index()]) * 1000 * 4.1868 / total_timer_time()[$index()].value).toFixed(1)"></span>
                                        <!-- /ko -->
                                    <!-- /ko -->

                                   
                                   

                                    <!-- POWER -->

                                    <!-- ko if: avg_power()[$index()] > 0  ||  max_power()[$index()] > 0  -->

                                    <img class="inlineIcon" alt="Power" title="Power (w)" src="Images/power.png" />

                                    <span title="Average power (w)" data-bind="text: avg_power()[$index()]"></span>

                                    <span title="Max power (w)" data-bind="text: max_power()[$index()]"></span>

                                    <!-- /ko -->

                                    <!-- CADENCE/STRIDES -->

                                    <!-- ko if: avg_cadence()[$index()] >= 0 || 
                            max_cadence()[$index()] >= 0 ||  
                          total_cycles_strides()[$index()] >=0 -->
                                    <img class="inlineIcon" alt="Cadence" title="Cadence" src="Images/cadence.png" />
                                    <!-- /ko -->

                                    <!-- ko if:  avg_cadence().length > 0  -->
                                    <span title="Average cadence" data-bind="text: avg_cadence()[$index()]"></span>
                                    <!-- /ko -->

                                    <!-- ko if: max_cadence().length > 0  -->
                                    <span title="Max cadence" data-bind="text: max_cadence()[$index()]"></span>
                                    <!-- /ko -->

                                    <!-- ko if: total_cycles_strides().length > 0  -->
                                    <span title="Total cycles/strides" data-bind="text: total_cycles_strides()[$index()]"></span>

                                    <!-- /ko -->

                                    <!-- ASCENT/DESCENT -->

                                    <!-- ko if: total_ascent()[$index()] >= 0  ||  total_descent()[$index()] >= 0 -->

                                    <img class="inlineIcon" alt="Ascent/Descent" title="Ascent/Descent" src="Images/ascent.png" />

                                    <span title="Total ascent (m)" data-bind="text: total_ascent()[$index()]"></span>

                                    <span title="Total descent (m)" data-bind="text: total_descent()[$index()]"></span>

                                    <!-- /ko -->


                                    <!-- ko if: avg_temperature()[$index()] >= 0  ||  max_temperature()[$index()] >= 0  -->

                                    <img class="inlineIcon" alt="Temperature" title="Temperature (C)" src="Images/temperature.png" />

                                    <span title="Average temperature (C)" data-bind="text: avg_temperature()[$index()]"></span>

                                    <span title="Max temperature (C)" data-bind="text: max_temperature()[$index()]"></span>

                                    <!-- /ko -->

                                    <!-- ko if: lap_trigger  && lap_trigger()[$index()] === 0 -->
                                    <img class="lapTrigger" src="Images/laptrigger/manual.png" title="LAP pressed" />
                                    <!-- /ko -->

                                    <!-- ko if: lap_trigger  && lap_trigger()[$index()] === 1 -->
                                    <img class="lapTrigger" src="Images/laptrigger/time.png" title="Time" />
                                    <!-- /ko -->

                                    <!-- ko if: lap_trigger && lap_trigger()[$index()] === 2 -->
                                    <img class="lapTrigger" src="Images/laptrigger/distance.png" title="Distance" />
                                    <!-- /ko -->

                                    <!-- ko if: lap_trigger  && lap_trigger()[$index()] === 3 -->
                                    <img class="lapTrigger" src="Images/laptrigger/position_start.png" title="Position start" />
                                    <!-- /ko -->

                                    <!-- ko if: lap_trigger  && lap_trigger()[$index()] === 4 -->
                                    <img class="lapTrigger" src="Images/laptrigger/position_lap.png" title="Position lap" />
                                    <!-- /ko -->

                                    <!-- ko if: lap_trigger && lap_trigger()[$index()] === 5 -->
                                    <img class="lapTrigger" src="Images/laptrigger/position_waypoint.png" title="Position waypoint" />
                                    <!-- /ko -->

                                    <!-- ko if: lap_trigger  && lap_trigger()[$index()] === 6 -->
                                    <img class="lapTrigger" src="Images/laptrigger/position_marked.png" title="Position marked" />
                                    <!-- /ko -->

                                    <!-- ko if: lap_trigger  && lap_trigger()[$index()] === 7 -->
                                    <img class="lapTrigger" src="Images/laptrigger/session_end.png" title="Session end" />
                                    <!-- /ko -->

                                </a>
                            </li>
                        </ul>
                    </li>

                    <!-- /ko -->

                    <!-- ko with: settingsVM -->
                    <li><a href="#">Settings</a>
                        <ul>
                            <li><a href="#">

                                <div>
                                    <input type="checkbox" data-bind="checked: showLapLines" />
                                    Lap and event timer start/stop lines
                                </div>

                            </a>
                            </li>

                            <li><a href="#">

                                <div>
                                    <input type="checkbox" data-bind="checked: showLapTriggers" />
                                    Lap triggers (i.e manual, auto distance)
                                </div>

                            </a>
                            </li>

                            <li><a href="#">

                                <div>
                                    <input type="checkbox" data-bind="checked: hideLAPtriggerTime" />
                                    Hide lap trigger on time from labels on chart
                                </div>

                            </a>
                            </li>

                            <li><a href="#">

                                <div>
                                    <input type="checkbox" data-bind="checked: showEvents" />
                                    Events (i.e START, STOP, HR recovery)
                                </div>

                            </a>
                            </li>

                           <!-- <li><a href="#">

                                <div>
                                    <input type="checkbox" data-bind="checked: showLegends" />
                                    Chart legends
                                </div>

                            </a>
                            </li>-->

                            <!--<li><a href="#">

                                <div>
                                    <input type="checkbox" data-bind="checked: storeInIndexedDB" />
                                    Use IndexedDB
                                </div>
                            </a>
                            </li>-->

                            <li><a href="#">

                                <div>
                                    <input type="checkbox" data-bind="checked: showDeviceInfo" />
                                    Devices/Sensors
                                </div>
                            </a>
                            </li>

                            <li><a href="#">

                                <div>
                                    <input type="checkbox" data-bind="checked: showHeaderInfo" />
                                    FIT header info.
                                </div>
                            </a>
                            </li>

                            <li><a href="#">

                                <div>
                                    <input type="checkbox" title="Some devices only record data in run sport mode, i.e FR 110. Forced mode introduced to allow for km/h activities like i.e cycling" data-bind="checked: forceSpeedKMprH" />
                                    Speed always in km/h
                                </div>
                            </a>
                            </li>

                            <!--<li><a href="#">

                            <div>
                                <input type="checkbox" data-bind="checked: requestHideAltitude" />
                                Hide altitude data
                            </div>
                        </a>
                        </li>-->

                            <li><a href="#">

                                <div>
                                    <input type="checkbox" data-bind="checked: requestAveragingOnSpeed" />
                                    Average speed
                                </div>
                            </a>
                            </li>

                            <li><a href="#">

                                <div>
                                    Avg.speed sample
                                <input type="range" min="3000" max="120000" data-bind="value: averageSampleTime" />
                                    <span data-bind="text: averageSampleTime"></span>ms
                                </div>
                            </a>
                            </li>

                            <li><a href="#">
                                <div>
                                    <input type="checkbox" data-bind="checked: distanceOnXAxis" />
                                    Distance (km) on X-axis
                                </div>
                            </a>
                            </li>

                             <li><a href="#">
 	 	
                                <div>
 	 	
                                    <input type="checkbox" data-bind="checked: TEIntensityPlotbands" />
 	 
                                    TE intensity plotbands
 	 
                                </div>
 	 	
                            </a>
 		
                            </li>

                            <li><a href="#">
 	 	
                                <div>
 	 	
                                    <input type="checkbox" data-bind="checked: logging" />
 	 
                                    Log messages to console (for debugging)
 	 
                                </div>
 	 	
                            </a>
 		
                            </li>

                            <li><a href="#">
                                <div>
                                    <img class="inlineIcon" title="Hostname where application was loaded" src="Images/server.png" />
                                    <span style="margin-left:2px" title="Hostname where application was loaded" data-bind="text: appHostname" />
                                </div>

                            </a>
                            </li>

                            <!--<li>
                                <a href="#">

                                    <div>
                                        <img class="inlineIcon" src="Images/cookie-chocolate.png" />
                                        <label title="Session identifier">JSESSIONID</label>-->
                                        <!-- Pattern regex. only used when input as part of form validation checked when submitted, not used here -->
                           <!--             <input size="32" pattern="^[0-9A-F]{32}$" maxlength="32" data-bind="value: GCJSESSIONID, valueUpdate: 'afterkeydown'" title="ONLY USE IF YOU AGREE TO FETCH *YOUR PERSONAL* DATA ON GARMIN CONNECT VIA PROXY. Will be sent to a nodejs proxy service for garmin connect. Its by issued by web server after login and available in the browser under connect.garmin.com in cookie privacy settings. Doesnt require username/password for accessing activities. Stored in local storage in web browser. Format: 32 hex digits." />
                                    </div>
                                </a>



                            </li>-->

                           <!-- <li><a href="#">

                                <div>
                                    <img class="inlineIcon" src="Images/cookie-chocolate.png" />
                                    <label title="Node behind load balancer">BIGipServer</label>
                                    <input data-bind="value: GCBIGipServer, valueUpdate: 'afterkeydown'" title="ONLY USE IF YOU AGREE TO FETCH *YOUR PERSONAL* DATA ON GARMIN CONNECT VIA PROXY. Will be sent to a nodejs proxy service for garmin connect. Session cookie for node behind load balancer, its available in the browser under connect.garmin.com in cookie privacy settings.  Doesnt require username/password for accessing activities. Stored in local storage in web browser." />

                                </div>

                            </a>
                            </li>

                            <li><a href="#">

                                <div>
                                    <img class="inlineIcon" src="Images/cookie-chocolate.png" />
                                    <label title="org.jboss.seam.security.authtoken - issued by auto-login/RememberMe functionality">Authentication token</label>
                                    <input data-bind="value: GCauthtoken, valueUpdate: 'afterkeydown'" title="ONLY USE IF YOU AGREE TO FETCH *YOUR PERSONAL* DATA ON GARMIN CONNECT VIA PROXY. Will be sent to a nodejs proxy service for garmin connect. Authentication cookie, its available in the browser under connect.garmin.com in cookie privacy settings.  Doesnt require username/password for accessing activities. Stored in local storage in web browser." />

                                </div>

                            </a>
                            </li>-->

                             <li><a href="#">

                                <div>
                                    <img class="inlineIcon" src="Images/image.png" />
                                    <label title="Live image">Live image URL</label>
                                    <input data-bind="value: liveImage" size="32" title="Live image URL, i.e web cam of interesting place" />

                                </div>

                            </a>
                            </li>

                            <li data-bind="visible: hasWebNotification"><a data-bind="click: notificationPermission">
                                <span>Give permission for notifications</span>
                            </a>
                            </li>

                            
                            <li>
                               
                                <a>
                                     <!-- ko if: networkStatus -->
                                <img class="inlineIcon" src="Images/network-status.png" title="ONLINE" alt="ONLINE" />
                                <!-- /ko -->
                                <!-- ko ifnot: networkStatus -->
                                <img class="inlineIcon" src="Images/network-status-offline.png" title="OFFLINE" alt="OFFLINE" />
                                <!-- /ko -->
                                    <span style="margin-left: 2px">Network status</span>
                                </a>
                            </li>

                        </ul>
                    </li>
                    <!-- /ko -->

                    

                    
                    <!-- ko with: headerInfoVM -->
                    <li data-bind="visible: $parent.settingsVM.showHeaderInfo">
                        <a href="#">FIT header</a>
                        <ul>
                            <li>
                               <a> 
              <!--  <span title="File name" data-bind="text: fileName"></span>
                <span title="File size" data-bind="text: fileSize"></span> -->
                                    <label class="HeaderLabel">Data type:</label><span title="Data type" data-bind="text: dataType"></span>
                                    <label class="HeaderLabel">Size:</label><span title="Header size" data-bind="text: headerSize"></span>
                                    <label class="HeaderLabel">Data size:</label><span title="Data size" data-bind="text: dataSize"></span>
                                    <label class="HeaderLabel">Protocol version:</label><span title="Protocol version" data-bind="text: protocolVersion"></span>
                                    <label class="HeaderLabel">Profile version:</label><span title="Profile version" data-bind="text: profileVersion"></span>
                                    <label class="HeaderLabel">CRC:</label><span title="CRC" data-bind="text: headerCRC"></span>
                                </a>
                               

                            </li>
                        </ul>
                    </li>
                    <!-- /ko -->

                    <li>
                        <a href="#">Credits</a>
                        <ul>

                            <li>
                                <a href="http://www.highcharts.com">Highcharts - great plotting library</a>
                            </li>

                            <li>
                                <a href="http://knockoutjs.com/index.html">Knockoutjs - UI with property binding</a>
                            </li>

                            <li>
                                <a href="https://groups.google.com/forum/?fromgroups#!forum/knockoutjs">Knockoutjs - user group</a>
                            </li>

                             <li>
                                <a href="https://github.com/hkskoglund/FITView">Git Hub for managing sourcecode</a>
                            </li>

                            <li>
                                <a href="http://www.thisisant.com/developer/resources/downloads">FIT SDK documentation</a>
                            </li>

                            <li>
                                <a href="http://www.windowsazure.com/en-us/">Windows Azure cloud platform - deployment of application</a>
                            </li>

                            <li>
                                <a href="https://developers.google.com/maps/documentation/javascript/">Google Maps API</a>
                            </li>

                            <li>
                                <a href="jsfiddle.net">jsfiddle.net - Code snippet experimentation</a>
                            </li>

                            <li>
                                <a href="jshint.com">jshint.com - Code quality</a>
                            </li>

                            <li>
                                <a href="http://momentjs.com/">momentjs - Date/Time library</a>
                            </li>

                            <li>
                                <a href="http://www.jquery.com">jQuery</a>
                            </li>

                            <li>
                                <a href="http://modernizr.com/">Modernizr - feature detection</a>
                            </li>

                            <li>
                                <a href="http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-web">Visual Studio 2012 Web Express</a>
                            </li>
                            
                             <li>
                                <a href="https://developers.google.com/chrome-developer-tools/">Chrome developer tools</a>
                            </li>

                            <li>
                                <a href="http://designmodo.com/css3-dropdown-menu/">CSS3 dropdown menu - Valeriu Timbuc</a>
                            </li>

                            <li>
                                <a href="http://www.stackoverflow.com">Stackoverflow - for providing answers</a>
                            </li>

                            <li>
                                <a href="http://www.everaldo.com">Crystal Project Icons - Everaldo Coelho</a>
                            </li>

                            <li>
                                <a href="http://www.gettyicons.com/free-icon/108/point-of-interest-icon-set/free-green-bicycle-icon-png">Icon Lands - design studio</a>
                            </li>

                            <li>
                                <a href="http://www.iconarchive.com/icons/yusuke-kamiyamane/fugue/README.txt">Fugue Icons 3.0 - Yusuke Kamiyamane</a>
                            </li>

                            
                        </ul>
                    </li>

                   <!--  <li>
                        <a href="#">About</a>
                        <ul>

                            <li>
                                <a href="https://github.com/hkskoglund">Created by Henning Knut Skoglund</a>
                            </li>

                         </ul>
                    </li> -->

                     <!-- ko with: exportVM -->
                    <li>
                        <a href="#">Export</a>
                        <ul>
                            
                             <li>
                                <div>
                                    <input type="checkbox" title="Include header in CSV (top row)" data-bind="checked: csv.header"/>
                                    <label style="color: white">Header</label>
                                   <!-- <input type="text"  title="Name of CSV data column" data-bind="value: headerTitle" /> -->
                                    <select data-bind="options: csv.type, value: csv.selectedType" title="Type of CSV export"></select>
                                    <label style="color: white">Scale</label>
                                    <input type="text"  title="1 = seconds, 1000 = ms." data-bind="value: csv.scale" /> 
                                </div>
                             <a href="#"></a>
                            </li>

                            <li >
                                <a id="aExportHRV_CSV" title="Export HRV as CSV" data-bind="click: csv.tryMSBlobSave">
                                    Export HRV as CSV 
                            </a>
                            </li>
                            
                            
                        </ul>

                    </li>
                     <!-- /ko -->


                     <!-- ko with: settingsVM -->

                        <li data-bind='visible: typeof FITSetting() !== "undefined" && typeof FITSetting().user_profile !== "undefined"'><a title="User profile in FIT settings" href="#"><img src="Images/user-silhouette.png" class="inlineIcon" /></a>
                            <!-- ko if: typeof FITSetting() !== "undefined" && typeof FITSetting().user_profile !== "undefined" -->
                            <!-- ko with: FITSetting().user_profile -->
                            <ul>

                                <!-- ko if: typeof $parent.FITSetting !== "undefined" && typeof $parent.FITSetting().header_info !== "undefined" && typeof $parent.FITSetting().header_info.timestamp !== "undefined" -->
                                <li><a href="#">
                                    <label>Imported: </label>
                                    <span data-bind="text: (new Date($parent.FITSetting().header_info.timestamp)).toLocaleString()" />
                                </a>
                                </li>
                                 <!-- /ko -->

                                <!-- ko if: typeof friendly_name !== "undefined" && typeof friendly_name[0] !== "undefined" -->
                                <li><a href="#">
                                    <label>Name: </label>
                                    <span data-bind="text: friendly_name[0]" />

                                </a>
                                </li>
                                 <!-- /ko -->

                                <!-- ko if: typeof weight !== "undefined" && typeof weight[0] !== "undefined" -->
                                <li><a href="#">
                                    <label>Weight: </label>
                                    <span data-bind="text: weight[0]" />

                                </a>
                                </li>
                                 <!-- /ko -->

                                <!-- ko if: typeof gender !== "undefined" && typeof gender[0] !== "undefined" -->
                                <li><a href="#">
                                    <label>Gender: </label>
                                    <!-- ko if: gender[0] === 1 -->
                                    <span>Male</span>
                                    <!-- /ko -->
                                    <!-- ko if: gender[0] === 0 -->
                                    <span>Female</span>
                                    <!-- /ko -->
                                </a>
                                </li>
                                 <!-- /ko -->

                                <!-- ko if: typeof age !== "undefined" && typeof age[0] !== "undefined" -->
                                 <li><a href="#">
                                    <label>Age: </label>
                                    <span data-bind="text: age[0]" />

                                </a>
                                </li>
                                 <!-- /ko -->

                                <!-- ko if: typeof height !== "undefined" && typeof height[0] !== "undefined" -->
                                <li><a href="#">
                                    <label>Height: </label>
                                    <span data-bind="text: height[0]" />

                                </a>
                                </li>
                                <!-- /ko -->

                                 <!-- ko if: typeof resting_heart_rate !== "undefined" && typeof resting_heart_rate[0] !== "undefined" -->
                                <li><a href="#">
                                    <label>Resting heart rate: </label>
                                    <span data-bind="text: resting_heart_rate[0]" />

                                </a>
                                </li>
                                <!-- /ko -->

                                <!-- ko if: typeof activity_class !== "undefined" && typeof activity_class[0] !== "undefined" -->
                                <li><a href="#">
                                    <label title="Firstbeat activity class">Activity class:</label>
                                    <span data-bind="text: activity_class[0]" />
                                </a>
                                </li>
                                <!-- /ko -->

                                


                            </ul>
                            <!-- /ko -->
                              <!-- /ko -->
                        </li>

                        <li data-bind='visible: typeof FITSetting() !== "undefined" && typeof FITSetting().hrm_profile !== "undefined"'><a title="Heart Rate Monitor in FIT settings" href="#"><img class="inlineIcon" src ="Images/deviceinfo/HRM.jpg" /></a>
                            <!-- ko if: typeof FITSetting() !== "undefined" && typeof FITSetting().hrm_profile !== "undefined" -->
                            <!-- ko with: FITSetting().hrm_profile -->
                            <ul>

                                <!-- ko if: typeof hrm_ant_id !== "undefined" && typeof hrm_ant_id[0] !== "undefined" -->
                                <li><a href="#">
                                    <label>ANT id: </label>
                                    <span data-bind="text: hrm_ant_id[0]" />

                                </a>
                                </li>
                                 <!-- /ko -->

                                <!-- ko if: typeof hrm_ant_id_trans_type !== "undefined" && typeof hrm_ant_id_trans_type[0] !== "undefined" -->
                                 <li><a href="#">
                                    <label>ANT id trans. type: </label>
                                    <span data-bind="text: hrm_ant_id_trans_type[0]" />
                                </a>
                                </li>
                                 <!-- /ko -->

                                <!-- ko if: typeof enabled !== "undefined" && typeof enabled[0] !== "undefined" -->
                                <li><a href="#">
                                    <label>Enabled: </label>
                                     <input type="checkbox" data-bind="checked: enabled[0]" />
                                </a>
                                </li>
                                 <!-- /ko -->

                                <!-- ko if: typeof log_hrv !== "undefined" && typeof log_hrv[0] !== "undefined" -->
                                <li><a href="#">
                                    <label>Log HRV: </label>
                                     <input type="checkbox" data-bind="checked: log_hrv[0]" />
                                </a>
                                </li>
                                 <!-- /ko -->


                            </ul>
                            <!-- /ko -->
                              <!-- /ko -->
                        </li>

                        <li data-bind='visible: typeof FITSetting() !== "undefined" && typeof FITSetting().sdm_profile !== "undefined"'><a title="Speed Distance Monitor in FIT settings" href="#"><img class="inlineIcon" src ="Images/deviceinfo/garmin/footpod.jpg" /></a>
                            <!-- ko if: typeof FITSetting() !== "undefined" && typeof FITSetting().sdm_profile !== "undefined" -->
                                <!-- ko with: FITSetting().sdm_profile -->
                                     <ul>

                                <!-- ko if: typeof sdm_ant_id !== "undefined" && typeof sdm_ant_id[0] !== "undefined" -->
                                <li><a href="#">
                                    <label>ANT id: </label>
                                    <span data-bind="text: sdm_ant_id[0]" />
                                </a>
                                </li>
                                 <!-- /ko -->

                                <!-- ko if: typeof sdm_ant_id_trans_type !== "undefined" && typeof sdm_ant_id_trans_type[0] !== "undefined" -->
                                 <li><a href="#">
                                    <label>ANT id trans. type: </label>
                                    <span data-bind="text: sdm_ant_id_trans_type[0]" />
                                </a>
                                </li>
                                 <!-- /ko -->

                                <!-- ko if: typeof enabled !== "undefined" && typeof enabled[0] !== "undefined" -->
                                <li><a href="#">
                                    <label>Enabled: </label>
                                     <input type="checkbox" data-bind="checked: enabled[0]" />
                                </a>
                                </li>
                                 <!-- /ko -->

                                <!-- ko if: typeof odometer !== "undefined" && typeof odometer[0] !== "undefined" -->
                                <li><a href="#">
                                    <label>Odometer: </label>
                                       <span data-bind="text: odometer[0]" />
                                </a>
                                </li>
                                 <!-- /ko -->

                                <!-- ko if: typeof sdm_cal_factor !== "undefined" && typeof sdm_cal_factor[0] !== "undefined" -->
                                <li><a href="#">
                                    <label>SDM cal. factor: </label>
                                    <span data-bind="text: (sdm_cal_factor[0]/100)*1000" />
                                    <!-- By default scale factor is in %, on 910XT 100% = scale fator of 1000 -->
                                    </a>
                                </li>
                                 <!-- /ko -->

                                <!-- ko if: typeof speed_source !== "undefined" && typeof speed_source[0] !== "undefined" -->
                                <li><a href="#">
                                    <label>Speed source: </label>
                                    <!--<span data-bind="text: speed_source[0]" />-->
                                     <!-- ko if: speed_source[0] === 1 -->
                                    <span>Footpod</span>
                                    <!-- /ko -->
                                    <!-- ko if: speed_source[0] === 0 -->
                                    <span>GPS</span>
                                     <!-- /ko -->
                                    </a>
                                </li>
                                 <!-- /ko -->


                            </ul>
                                <!-- /ko -->
                            <!-- /ko -->
                        </li>

                     <li data-bind='visible: typeof FITSportSetting() !== "undefined" && FITSportSetting().length > 0'><a title="Zones (i.e HR zones)" href="#"><img class="inlineIcon" src ="Images/heart.png" /></a>
                        
                        <!-- ko if: typeof FITSportSetting() !== "undefined" -->

                            <ul data-bind="foreach: FITSportSetting()">

                                 <!-- ko if: typeof header_info !== "undefined" && typeof header_info.timestamp !== "undefined" -->
                                <li><a href="#">
                                    <label data-bind ="text: 'Imported-' + sport.name[0] + ': '"></label>
                                    <span data-bind="text: (new Date(header_info.timestamp)).toLocaleString()" />
                                </a>
                                </li>
                                 <!-- /ko -->

                                <!-- ko if: typeof speed_zone !== "undefined" && typeof speed_zone.high_value !== "undefined" -->
                                    <li><a href="#">
                                        <label data-bind ="text: 'Speed-' + sport.name[0] + ': '"></label>
                                        <span data-bind="text: JSON.stringify(speed_zone.high_value)" />
                                       
                                    </a>
                                    </li>
                                <!-- /ko -->

                                <!-- ko if: typeof hr_zone !== "undefined" && typeof hr_zone.high_bpm !== "undefined" -->
                                    <li><a href="#">
                                        <label data-bind ="text: 'HR-'+sport.name[0]+': '"></label>
                                        <span data-bind="text: JSON.stringify(hr_zone.high_bpm)" />
                                    </a>
                                    </li>
                                <!-- /ko -->

                                <!-- MAYBE: Include MET zones -->

                                <!-- ko if: typeof power_zone !== "undefined" && typeof power_zone.high_value !== "undefined" -->
                                    <li><a href="#">
                                        <label data-bind ="text: 'Power-' + sport.name[0] + ': '"></label>
                                        <span data-bind="text: JSON.stringify(power_zone.high_value)" />
                                    </a>
                                    </li>
                                <!-- /ko -->

                                <!-- ko if: typeof zones_target !== "undefined" && typeof zones_target.max_heart_rate !== "undefined" -->
                                    <li><a href="#">
                                        <label data-bind ="text: 'Max HR-' + sport.name[0] + ': '"></label>
                                        <span data-bind="text: zones_target.max_heart_rate" />
                                    </a>
                                    </li>
                                <!-- /ko -->

                                <!-- ko if: typeof zones_target !== "undefined" && typeof zones_target.threshold_heart_rate !== "undefined" -->
                                    <li><a href="#">
                                        <label data-bind ="text: 'Threshold HR-' + sport.name[0] + ': '"></label>
                                        <span data-bind="text: zones_target.threshold_heart_rate" />
                                    </a>
                                    </li>
                                <!-- /ko -->

                                 <!-- ko if: typeof zones_target !== "undefined" && typeof zones_target.functional_threshold_power !== "undefined" -->
                                    <li><a href="#">
                                        <label title="Functional threshold power" data-bind ="text: 'FTP-' + sport.name[0] + ': '"></label>
                                        <span data-bind="text: zones_target.functional_threshold_power" />
                                    </a>
                                    </li>
                                <!-- /ko -->

                                 <!-- ko if: typeof zones_target !== "undefined" && typeof zones_target.hr_calc_type !== "undefined" -->
                                    <li><a href="#">
                                        <label data-bind ="text: 'HR calc. type-' + sport.name[0] + ': '"> </label>

                                        <!-- ko if: zones_target.hr_calc_type[0] === 0 -->
                                            <span>Custom</span>
                                        <!-- /ko -->

                                         <!-- ko if: zones_target.hr_calc_type[0] === 1 -->
                                            <span>Percent of max HR</span>
                                        <!-- /ko -->

                                         <!-- ko if: zones_target.hr_calc_type[0] === 2 -->
                                            <span title="HRR = Heart rate reserve (Max HR - resting HR)">Percent of HRR</span>
                                        <!-- /ko -->
                                    </a>
                                    </li>
                                <!-- /ko -->

                                <!-- ko if: typeof zones_target !== "undefined" && typeof zones_target.pwr_calc_type !== "undefined" -->
                                    <li><a href="#">
                                        <label data-bind ="text: 'Power calc. type-' + sport.name[0] + ': '"></label>

                                        <!-- ko if: zones_target.pwr_calc_type[0] === 0 -->
                                            <span>Custom</span>
                                        <!-- /ko -->

                                         <!-- ko if: zones_target.pwr_calc_type[0] === 1 -->
                                            <span title="FTP = Functional threshold power">Percent of FTP</span>
                                        <!-- /ko -->
                                        
                                    </a>
                                    </li>
                                <!-- /ko -->

                            </ul>

                        <!-- /ko -->
                        
                    </li>

                    <li data-bind='visible: typeof FITSetting() !== "undefined" && typeof FITSetting().bike_profile !== "undefined"'><a title="Bike profile in FIT settings" href="#">
                        <img src="Images/Sport/cycling.png" class="inlineIcon" /></a>
                        <!-- ko if: typeof FITSetting() !== "undefined" && typeof FITSetting().bike_profile !== "undefined" && typeof FITSetting().bike_profile.name !== "undefined" && FITSetting().bike_profile.name.length > 0 -->
                            <!-- ko with: FITSetting().bike_profile -->
                                <ul>
                                    <li>
                                        <select data-bind="options: name, value: selectedBikeName"></select>
                                    </li>

                                    <!-- ko if: typeof odometer !== "undefined"  -->
                                        <li><a href="#">
                                            <label>Odometer: </label>
                                            <span data-bind="text: odometer[selectedBikeIndex()]/1000+ ' km'" /></a>
                                        </li>
                                    <!-- /ko -->

                                    

                                    <!-- ko if: typeof custom_wheelsize !== "undefined"  -->
                                        <li><a href="#">
                                            <label>Custom wheelsize:</label>
                                            <span data-bind="text: custom_wheelsize[selectedBikeIndex()] * 1000 + ' mm'" />
                                        </a>
                                        </li>
                                    <!-- /ko -->

                                    <!-- ko if: typeof auto_wheelsize !== "undefined"  -->
                                        <li><a href="#">
                                            <label>Auto wheelsize:</label>
                                            <span data-bind="text: auto_wheelsize[selectedBikeIndex()]*1000 + ' mm'" />
                                        </a>
                                        </li>
                                    <!-- /ko -->

                                    <!-- ko if: typeof bike_weight !== "undefined"  -->
                                        <li><a href="#">
                                            <label>Weight:</label>
                                            <span data-bind="text: bike_weight[selectedBikeIndex()]+ ' kg'" />
                                        </a>
                                        </li>
                                    <!-- /ko -->

                                     <!-- ko if: typeof power_cal_factor !== "undefined"  -->
                                        <li><a href="#">
                                            <label>Power cal. factor: </label>
                                            <span data-bind="text: power_cal_factor[selectedBikeIndex()] + ' %'" />
                                        </a>
                                        </li>
                                    <!-- /ko -->

                                    <!-- ko if: typeof auto_wheel_cal !== "undefined"  -->
                                        <li><a href="#">
                                            <label>Auto wheel cal.: </label>
                                             <input type="checkbox" data-bind="checked: auto_wheel_cal[selectedBikeIndex()]" />
                                        </a>
                                        </li>
                                 <!-- /ko -->

                                    <!-- ko if: typeof auto_power_zero !== "undefined"  -->
                                        <li><a href="#">
                                            <label>Auto power zero: </label>
                                             <input type="checkbox" data-bind="checked: auto_power_zero[selectedBikeIndex()]" />
                                        </a>
                                        </li>
                                 <!-- /ko -->

                                    <!-- ko if: typeof id !== "undefined"  -->
                                        <li><a href="#">
                                            <label>Id: </label>
                                            <span data-bind="text: id[selectedBikeIndex()]" />
                                        </a>
                                        </li>
                                    <!-- /ko -->

                                    

                                    <!-- ko if: typeof crank_length !== "undefined"  -->
                                        <li><a href="#">
                                            <label>Crank length: </label>
                                            <span data-bind="text: crank_length[selectedBikeIndex()] + ' %'" />
                                        </a>
                                        </li>
                                    <!-- /ko -->

                                     <!-- ko if: typeof enabled !== "undefined"  -->
                                        <li><a href="#">
                                            <label>Enabled: </label>
                                             <input type="checkbox" data-bind="checked:enabled[selectedBikeIndex()]" />
                                        </a>
                                        </li>
                                 <!-- /ko -->

                                    <!-- ko if: typeof spd_enabled !== "undefined" && spd_enabled[selectedBikeIndex()] -->
                                        <li><a href="#">
                                            <label>SPD enabled: </label>
                                             <input type="checkbox" data-bind="checked: spd_enabled[selectedBikeIndex()]" />
                                        </a>
                                        </li>
                                 <!-- /ko -->

                                    <!-- ko if: typeof cad_enabled !== "undefined"  && cad_enabled[selectedBikeIndex()]-->
                                        <li><a href="#">
                                            <label>CAD enabled: </label>
                                             <input type="checkbox" data-bind="checked: cad_enabled[selectedBikeIndex()]" />
                                        </a>
                                        </li>
                                 <!-- /ko -->

                                    <!-- ko if: typeof spdcad_enabled !== "undefined"  && spdcad_enabled[selectedBikeIndex()]-->
                                        <li><a href="#">
                                            <label>SPDCAD enabled: </label>
                                             <input type="checkbox" data-bind="checked: spdcad_enabled[selectedBikeIndex()]" />
                                        </a>
                                        </li>
                                 <!-- /ko -->

                                     <!-- ko if: typeof power_enabled !== "undefined" && power_enabled[selectedBikeIndex()] -->
                                        <li><a href="#">
                                            <label>Power enabled: </label>
                                             <input type="checkbox" data-bind="checked: power_enabled[selectedBikeIndex()]" />
                                        </a>
                                        </li>
                                 <!-- /ko -->

                                    <!-- ko if: typeof bike_spd_ant_id !== "undefined" &&  bike_spd_ant_id[selectedBikeIndex()] -->
                                        <li title="Bike speed sensor ANT id."><a href="#">
                                            <label>SPD ANT ID: </label>
                                            <span data-bind="text: bike_spd_ant_id[selectedBikeIndex()]" />
                                        </a>
                                        </li>
                                    <!-- /ko -->

                                     <!-- ko if: typeof bike_spd_ant_id_trans_type !== "undefined" &&  bike_spd_ant_id_trans_type[selectedBikeIndex()]   -->
                                        <li><a href="#">
                                            <label>SPD ANT id. trans. type: </label>
                                            <span data-bind="text: bike_spd_ant_id_trans_type[selectedBikeIndex()]"  />
                                        </a>
                                        </li>
                                    <!-- /ko -->

                                    <!-- ko if: typeof bike_cad_ant_id !== "undefined" &&  bike_cad_ant_id[selectedBikeIndex()]   -->
                                        <li title="Bike cadence sensor ANT id."><a href="#">
                                            <label>Cad ANT ID: </label>
                                            <span data-bind="text: bike_cad_ant_id[selectedBikeIndex()]" />
                                        </a>
                                        </li>
                                    <!-- /ko -->

                                    <!-- ko if: typeof bike_cad_ant_id_trans_type !== "undefined" &&  bike_cad_ant_id_trans_type[selectedBikeIndex()]  -->
                                        <li><a href="#">
                                            <label>CAD ANT id. trans. type: </label>
                                            <span data-bind="text: bike_cad_ant_id_trans_type[selectedBikeIndex()]" />
                                        </a>
                                        </li>
                                    <!-- /ko -->

                                    <!-- ko if: typeof bike_spdcad_ant_id !== "undefined" &&  bike_spdcad_ant_id[selectedBikeIndex()]  -->
                                        <li title="Bike speed and cadence sensor ANT id."><a href="#">
                                            <label>SPDCAD ANT ID: </label>
                                            <span data-bind="text: bike_spdcad_ant_id[selectedBikeIndex()]" />
                                        </a>
                                        </li>
                                    <!-- /ko -->

                                     <!-- ko if: typeof bike_spdcad_ant_id_trans_type !== "undefined" &&  bike_spdcad_ant_id_trans_type[selectedBikeIndex()]  -->
                                        <li><a href="#">
                                            <label>SPDCAD ANT id. trans. type: </label>
                                            <span data-bind="text: bike_spdcad_ant_id_trans_type[selectedBikeIndex()]" />
                                        </a>
                                        </li>
                                    <!-- /ko -->

                                    <!-- ko if: typeof bike_power_ant_id !== "undefined" &&  bike_power_ant_id[selectedBikeIndex()]   -->
                                        <li title="Bike power sensor ANT id."><a href="#">
                                            <label>Power ANT ID: </label>
                                            <span data-bind="text: bike_power_ant_id[selectedBikeIndex()]" />
                                        </a>
                                        </li>
                                    <!-- /ko -->

                                     <!-- ko if: typeof bike_power_ant_id_trans_type !== "undefined" &&  bike_power_ant_id_trans_type[selectedBikeIndex()]  -->
                                        <li><a href="#">
                                            <label>POWER ANT id. trans. type: </label>
                                            <span data-bind="text: bike_power_ant_id_trans_type[selectedBikeIndex()]" />
                                        </a>
                                        </li>
                                    <!-- /ko -->

                                   

                                </ul>
                             <!-- /ko -->
                         <!-- /ko -->
                    </li>
                    

                    <!-- /ko -->
                    
                    <!--<li>-->
                       <!-- <div id="zonesChart"></div>-->
                        <!--<ul>
                            <li><a href="#"></a>
                                 
                            </li>
                        </ul>-->
                    <!--</li>-->

                    <!--<li>
                        <div id="intensityChart"></div>
                       
                    </li>-->

                    <!--               <li>
                   <div data-bind="text: ko.toJSON($root)"></div>

               </li>   -->

                    

                </ul>

                
            </nav>

         <!--   <div data-bind="text: ko.toJSON($root.settingsVM)"></div>-->

            

            
            
            <!-- <div id="divHeartRateZones" style="width: 30%">
                <h1 style="font-size: larger; text-align: center">Heart rate zones</h1>
                <ul style="list-style : none">
                    <li>
                        <input type="text" placeholder="HR zone 1"/><input type="range" min="0" max="300"  /></li>
                    <li>
                        <input type="text" placeholder="HR zone 2"/><input type="range" min="0" max="300"  /></li>
                    <li>
                       <input type="text" placeholder="HR zone 3"/><input type="range" min="0" max="300"  /></li>
                    <li>
                        <input type="text" placeholder="HR zone 4"/><input type="range" min="0" max="300"  /></li>
                    <li>
                        <input type="text" placeholder="HR zone 5"/><input type="range" min="0" max="300" /></li>
                    
                </ul>
                <button id="btnSaveHRZones" style="float: right">Save</button>
            </div>-->


            <!-- ko with: sessionVM -->
            <div id="sessionDetails">
                <!--<div data-bind="text: ko.toJSON($root)"></div>-->

                <!-- ko if: selectedSession() !== undefined -->


                    <!-- ko if: sport()[selectedSession()] === 1 -->
                    <img class="inlineIcon" alt="Running" title="Running" src="Images/sport/running.png" />
                    <!-- /ko -->

                    <!-- ko if: sport()[selectedSession()] === 2 -->
                    <img class="inlineIcon" alt="Cycling" title="Cycling" src="Images/sport/cycling.png" />
                    <!-- /ko -->

                    <!-- ko if: sport()[selectedSession()] === 5 -->
                    <img class="inlineIcon" alt="Swimming" title="Swimming" src="Images/sport/swimming.png" />
                    <!-- /ko -->

                    <!-- ko if : start_time()[selectedSession()] -->

                    <span class = "sessionStartTime" data-bind="text: Highcharts.dateFormat('%A %e %B %Y %H:%M:%S', start_time()[selectedSession()]+$parent.settingsVM.timeZoneDifferenceUTC)"></span>
                    <!-- /ko -->

                
                    <!-- ko if: typeof total_timer_time !== "undefined" &&  total_timer_time().length > 0 && typeof total_timer_time()[selectedSession()] !== "undefined"  -->
                        <img class="inlineIcon" alt="Total timer time" title="Total timer time" src="Images/total_timer_time.png" />
                        <time><span class="sessionHHMMSS" title="Total timer time (excludes pauses)" data-bind="text: total_timer_time()[selectedSession()].toHHMMSS()"></span></time>
                    <!-- /ko -->

                 <!-- ko if: typeof total_elapsed_time !== "undefined" && total_elapsed_time().length > 0  && total_timer_time()[selectedSession()].value !== total_elapsed_time()[selectedSession()].value -->
                        <img class="inlineIcon" alt="Total elapsed time" title="Total elapsed time" src="Images/total_elapsed_time.png" />
                        <time><span class="sessionHHMMSS" title="Total elapsed time (includes pauses)" data-bind="text: total_elapsed_time()[selectedSession()].toHHMMSS()"></span></time>
                    <!-- /ko -->

                    <!-- ko if: total_distance().length > 0 -->
                         
                        <img class="inlineIcon" alt="Total distance" title="Total distance" src="Images/total_distance.png" />

                        <!-- ko if:  total_distance()[selectedSession()] < 1000 -->
                            <span class="sessionTOTALDISTANCE" title="Total distance" data-bind="text: total_distance()[selectedSession()].toFixed(0)+' m'"></span>
                        <!-- /ko -->

                         <!-- ko if:  total_distance()[selectedSession()] >= 1000 -->
                            <span class="sessionTOTALDISTANCE" title="Total distance" data-bind="text: (total_distance()[selectedSession()]/1000).toFixed(2)+' km'"></span>
                         <!-- /ko -->

                    <!-- /ko -->

                    <!-- ko if: typeof num_laps !== "undefined" && num_laps().length > 0 && num_laps()[selectedSession()] >= 0 -->
                        <img class="inlineIcon" alt="Number of laps" title="Number of laps" src="Images/number_of_laps.png" />
                        <span class="sessionTOTALDISTANCE" title="Number of laps" data-bind="text: num_laps()[selectedSession()].toFixed(0)"></span>
                    <!-- /ko -->

                    <!-- SPEED -->

                    <!-- ko if: avg_speed()[selectedSession()]  || max_speed()[selectedSession()]  -->
                        <img class="inlineIcon" alt="Speed" title="Speed" src="Images/speed.png" />
                    <!-- /ko -->


                <!-- BIKING/GENERIC -->
                <!-- ko if: sport()[selectedSession()] === 2 || sport()[selectedSession()] === 0  -->


                <!-- ko if: avg_speed()[selectedSession()] -->
                <span title="Average speed" data-bind="text: avg_speed()[selectedSession()].toKMprH()"></span>
                <!-- /ko -->

                <!-- ko if: max_speed()[selectedSession()]  -->
                <span title="Max speed" data-bind="text: max_speed()[selectedSession()].toKMprH()"></span>
                <!-- /ko -->
                <!-- /ko -->

                <!-- RUNNING -->

                <!-- ko if: sport()[selectedSession()] === 1 && $parent.speedMode() === 1-->

                <!-- ko if: avg_speed()[selectedSession()] -->
                <span title="Average speed" data-bind="text: avg_speed()[selectedSession()].toMINprKM()"></span>
                <!-- /ko -->

                <!-- ko if: max_speed()[selectedSession()] -->
                <span title="Max speed" data-bind="text: max_speed()[selectedSession()].toMINprKM()"></span>
                <!-- /ko -->
                <!-- /ko -->

                <!-- ko if: sport()[selectedSession()] === 1 && $parent.speedMode() === 2 -->

                <!-- ko if: avg_speed()[selectedSession()] -->
                <span title="Average speed" data-bind="text: avg_speed()[selectedSession()].toKMprH()"></span>
                <!-- /ko -->

                <!-- ko if: max_speed()[selectedSession()] -->
                <span title="Max speed" data-bind="text: max_speed()[selectedSession()].toKMprH()"></span>
                <!-- /ko -->
                <!-- /ko -->

                <!-- SWIMMING TO DO .... -->

                <!-- ko if: sport()[selectedSession()] === 5  -->

                <!-- ko if: avg_speed()[selectedSession()] -->
                <span title="Average speed" data-bind="text: avg_speed()[selectedSession()].toMINpr100M()"></span>
                <!-- /ko -->

                <!-- ko if: max_speed()[selectedSession()] -->
                <span title="Max speed" data-bind="text: max_speed()[selectedSession()].toMINpr100M()"></span>
                <!-- /ko -->
                <!-- /ko -->

                <!-- HEART RATE -->

                <!-- ko if: avg_heart_rate()[selectedSession()] ||  max_heart_rate()[selectedSession()] -->
                <img class="inlineIcon" alt="heartrate" title="Heart rate (bpm)" src="Images/heart.png" />
                <!-- /ko -->


                <!-- ko if:  avg_heart_rate()[selectedSession()]  >= 0 -->
                <span title="Average heart rate (bpm)" data-bind="text: avg_heart_rate()[selectedSession()]"></span>
                <!-- /ko -->

                <!-- ko if: max_heart_rate()[selectedSession()] >= 0 -->
                <span title="Max heart rate (bpm)" data-bind="text: max_heart_rate()[selectedSession()]"></span>
                <!-- /ko -->

                 <!-- HRV/RR -->

                <!-- ko if: typeof (rawData.hrv) !== "undefined" && typeof (rawData.hrv.time) !== "undefined" && rawData.hrv.time.length > 0 -->
                    <img class="inlineIcon" alt="HRV" title="HRV - heart rate variability. RR-interval data. Time in ms. between each heartbeat. It varies with expiration/inspiration." src="Images/hrv.png" />
                    <span data-bind="text: rawData.hrv.time.length, attr: { title: 'Contains ' + rawData.hrv.time.length + ' heart rate variability measurements' } "></span>
                <!-- /ko -->

                <!-- ko if: total_calories()[selectedSession()] > 0 || total_fat_calories()[selectedSession()] > 0-->
                <img class="inlineIcon" alt="kilo calorie" title="kcal" src="Images/kcalorie.png" />

                <span title="Total calories (kcal)" data-bind="text: total_calories()[selectedSession()]"></span>
                <!-- ko if: typeof total_timer_time()[selectedSession()].value !== "undefined" && total_elapsed_time()[selectedSession()].value > 0 -->
                <img class="inlineIcon" alt="Watt (J/s)" title="Watt (J/s)" src="Images/watt.png" />
                <span title="Watt" data-bind="text: ((total_calories()[selectedSession()]) * 1000 * 4.1868 / total_timer_time()[selectedSession()].value).toFixed(1)"></span>
                <!-- /ko -->
                <!-- ko if: total_fat_calories()[selectedSession()] > 0 -->
                <span title="Total fat calories (kcal)" data-bind="text: total_fat_calories()[selectedSession()]"></span>
                <img class="inlineIcon" alt="Watt (J/s)" title="Watt (J/s)" src="Images/watt.png" />
                <span title="Watt" data-bind="text: ((total_fat_calories()[selectedSession()]) * 1000 * 4.1868 / total_timer_time()[selectedSession()].value).toFixed(1)"></span>
                <!-- /ko -->

                <!-- /ko -->


                <!-- POWER -->

                <!-- ko if: avg_power()[selectedSession()] > 0   ||  max_power()[selectedSession()] > 0  -->

                <img class="inlineIcon" alt="Power" title="Power (w)" src="Images/power.png" />

                <span title="Average power (w)" data-bind="text: avg_power()[selectedSession()]"></span>

                <span title="Max power (w)" data-bind="text: max_power()[selectedSession()]"></span>

                <!-- /ko -->


                <!-- CADENCE/STRIDES -->

                <!-- ko if: avg_cadence()[selectedSession()] >= 0 || 
                            max_cadence()[selectedSession()] >= 0 ||  
                          total_cycles_strides()[selectedSession()] >=0 -->
                <img class="inlineIcon" alt="Cadence" title="Cadence" src="Images/cadence.png" />
                <!-- /ko -->

                <!-- ko if:  avg_cadence().length > 0  -->
                <span title="Average cadence" data-bind="text: avg_cadence()[selectedSession()]"></span>
                <!-- /ko -->

                <!-- ko if: max_cadence().length > 0  -->
                <span title="Max cadence" data-bind="text: max_cadence()[selectedSession()]"></span>
                <!-- /ko -->

                <!-- ko if: total_cycles_strides().length > 0  -->
                <span title="Total cycles/strides" data-bind="text: total_cycles_strides()[selectedSession()]"></span>

                <!-- /ko -->

                <!-- ASCENT/DESCENT -->

                <!-- ko if: total_ascent()[selectedSession()] >= 0  ||  total_descent()[selectedSession()] >= 0 -->

                <img class="inlineIcon" alt="Ascent/Descent" title="Ascent/Descent" src="Images/ascent.png" />

                <span title="Total ascent (m)" data-bind="text: total_ascent()[selectedSession()]"></span>

                <span title="Total descent (m)" data-bind="text: total_descent()[selectedSession()]"></span>

                <!-- /ko -->

                <!-- ko if: avg_temperature()[selectedSession()] >= 0  ||  max_temperature()[selectedSession()] >= 0  -->

                <img class="inlineIcon" alt="Temperature" title="Temperature (C)" src="Images/temperature.png" />

                <span title="Average temperature (C)" data-bind="text: avg_temperature()[selectedSession()]"></span>

                <span title="Max temperature (C)" data-bind="text: max_temperature()[selectedSession()]"></span>

                <!-- /ko -->


                <!-- ko if:  total_training_effect()[selectedSession()] >= 1 -->
                TE
                        <span data-bind="text: total_training_effect()[selectedSession()]"></span>

                <!-- meter tag ignored in  IE 10, but works in Chrome -->
                <meter title="Training effect" style="padding-left: 5px; padding-bottom: 6px" high="4" low="1.5" min="1" max="5" data-bind="value: total_training_effect()[selectedSession()]"></meter>
                <!-- /ko -->



                <!-- Session trigger -->



                <!-- ko if: trigger()[selectedSession()] === 0 -->
                <img class="sessionTrigger" src="Images/sessiontrigger/activity_end.png" title="Activity end" />
                <!-- /ko -->

                <!-- ko if: trigger()[selectedSession()] === 1 -->
                <img class="sessionTrigger" src="Images/sessiontrigger/manual.png" title="User changed sport (MODE)" />
                <!-- /ko -->

                <!-- ko if: trigger()[selectedSession()] === 2 -->
                <img class="sessionTrigger" src="Images/sessiontrigger/auto_multi_sport.png" title="Auto multi-sport feature is enabled and user pressed LAP button to advance session" />
                <!-- /ko -->

                <!-- ko if: trigger()[selectedSession()] === 3 -->
                <img class="sessionTrigger" src="Images/sessiontrigger/fitness_equipment.png" title="Auto sport change caused by user linking to fitness equipment" />
                <!-- /ko -->

                <!-- /ko -->

            </div>
            <!-- /ko -->

            <!-- ko with: lapVM -->
            <div id="lapDetails">
                <!--<div data-bind="text: ko.toJSON($root)"></div>-->

                <!-- ko if: selectedLap() !== undefined -->


                <!-- ko if: sport()[selectedLap()] === 1 -->
                <img class="inlineIcon" alt="Running" title="Running" src="Images/sport/running.png" />
                <!-- /ko -->

                <!-- ko if: sport()[selectedLap()] === 2 -->
                <img class="inlineIcon" alt="Cycling" title="Cycling" src="Images/sport/cycling.png" />
                <!-- /ko -->

                <!-- ko if: sport()[selectedLap()] === 5 -->
                <img class="inlineIcon" alt="Swimming" title="Swimming" src="Images/sport/swimming.png" />
                <!-- /ko -->

                <!-- ko if : start_time()[selectedLap()] -->

                <span data-bind="text: Highcharts.dateFormat('%A %e %B %Y %H:%M:%S', start_time()[selectedLap()]+$parent.settingsVM.timeZoneDifferenceUTC)"></span>
                <!-- /ko -->


                
                <!-- ko if: total_timer_time().length > 0 && selectedLap() !== undefined  -->
                  <img class="inlineIcon" alt="Total timer time" title="Total timer time" src="Images/total_timer_time.png" />
                <time><span class="sessionHHMMSS" title="Total timer time (excludes pauses)" data-bind="text: total_timer_time()[selectedLap()].toHHMMSS()"></span></time>
                <!-- /ko -->

                <!-- ko if: total_elapsed_time().length > 0  && total_timer_time()[selectedLap()].value !== total_elapsed_time()[selectedLap()].value -->
                  <img class="inlineIcon" alt="Total elapsed time" title="Total elapsed time" src="Images/total_elapsed_time.png" />
                <time><span class="sessionHHMMSS" title="Total elapsed time (includes pauses)" data-bind="text: total_elapsed_time()[selectedLap()].toHHMMSS()"></span></time>
                <!-- /ko -->

                <!-- ko if: total_distance().length > 0 -->
                  <img class="inlineIcon" alt="Total distance" title="Total distance" src="Images/total_distance.png" />
                <span class="sessionTOTALDISTANCE" title="Total distance (m)" data-bind="text: total_distance()[selectedLap()].toFixed(0)"></span>
                <!-- /ko -->

                <!-- SPEED -->

                <!-- ko if: avg_speed()[selectedLap()]  || max_speed()[selectedLap()]  -->
                <img class="inlineIcon" alt="Speed" title="Speed" src="Images/speed.png" />
                <!-- /ko -->


                <!-- BIKING/GENERIC -->
                <!-- ko if: sport()[selectedLap()] === 2 || sport()[selectedLap()] === 0  -->


                <!-- ko if: avg_speed()[selectedLap()] -->
                <span title="Average speed" data-bind="text: avg_speed()[selectedLap()].toKMprH()"></span>
                <!-- /ko -->

                <!-- ko if: max_speed()[selectedLap()]  -->
                <span title="Max speed" data-bind="text: max_speed()[selectedLap()].toKMprH()"></span>
                <!-- /ko -->
                <!-- /ko -->

                <!-- RUNNING -->

                <!-- ko if: sport()[selectedLap()] === 1 && $parent.speedMode() === 1-->

                <!-- ko if: avg_speed()[selectedLap()] -->
                <span title="Average speed" data-bind="text: avg_speed()[selectedLap()].toMINprKM()"></span>
                <!-- /ko -->

                <!-- ko if: max_speed()[selectedLap()] -->
                <span title="Max speed" data-bind="text: max_speed()[selectedLap()].toMINprKM()"></span>
                <!-- /ko -->
                <!-- /ko -->

                <!-- ko if: sport()[selectedLap()] === 1 && $parent.speedMode() === 2 -->

                <!-- ko if: avg_speed()[selectedLap()] -->
                <span title="Average speed" data-bind="text: avg_speed()[selectedLap()].toKMprH()"></span>
                <!-- /ko -->

                <!-- ko if: max_speed()[selectedLap()] -->
                <span title="Max speed" data-bind="text: max_speed()[selectedLap()].toKMprH()"></span>
                <!-- /ko -->
                <!-- /ko -->

                <!-- SWIMMING TO DO .... -->

                <!-- ko if: sport()[selectedLap()] === 5  -->

                <!-- ko if: avg_speed()[selectedLap()] -->
                <span title="Average speed" data-bind="text: avg_speed()[selectedLap()].toMINpr100M()"></span>
                <!-- /ko -->

                <!-- ko if: max_speed()[selectedLap()] -->
                <span title="Max speed" data-bind="text: max_speed()[selectedLap()].toMINpr100M()"></span>
                <!-- /ko -->
                <!-- /ko -->

                <!-- HEART RATE -->

                <!-- ko if: avg_heart_rate()[selectedLap()] ||  max_heart_rate()[selectedLap()] -->
                <img class="inlineIcon" alt="heartrate" title="Heart rate (bpm)" src="Images/heart.png" />
                <!-- /ko -->


                <!-- ko if:  avg_heart_rate()[selectedLap()]  >= 0 -->
                <span title="Average heart rate (bpm)" data-bind="text: avg_heart_rate()[selectedLap()]"></span>
                <!-- /ko -->

                <!-- ko if: max_heart_rate()[selectedLap()] >= 0 -->
                <span title="Max heart rate (bpm)" data-bind="text: max_heart_rate()[selectedLap()]"></span>
                <!-- /ko -->


                <!-- ko if: total_calories()[selectedLap()] > 0 || total_fat_calories()[selectedLap()] > 0-->
                <img class="inlineIcon" alt="kilo calorie" title="kcal" src="Images/kcalorie.png" />

                <span title="Total calories (kcal)" data-bind="text: total_calories()[selectedLap()]"></span>
                 <!-- ko if: typeof total_calories()[selectedLap()] !== "undefined" && total_timer_time()[selectedLap()].value > 0 -->
                  <img class="inlineIcon" alt="Watt (J/s)" title="Watt (J/s)" src="Images/watt.png" />
                     <span title="Watt" data-bind="text: ((total_calories()[selectedLap()]  )* 1000 * 4.1868 / total_timer_time()[selectedLap()].value).toFixed(1)"></span>
                 <!-- /ko -->
                <!-- ko if: typeof total_fat_calories()[selectedLap()] !== "undefined" && total_fat_calories()[selectedLap()] > 0 -->
                <span title="Total fat calories (kcal)" data-bind="text: total_fat_calories()[selectedLap()]"></span>
                 <img class="inlineIcon" alt="Watt (J/s)" title="Watt (J/s)" src="Images/watt.png" />
                     <span title="Watt" data-bind="text: (( total_fat_calories()[selectedLap()]) * 1000 * 4.1868 / total_timer_time()[selectedLap()].value).toFixed(1)"></span>
                
                <!-- /ko -->
                <!-- /ko -->


                <!-- POWER -->

                <!-- ko if: avg_power()[selectedLap()] > 0  ||  max_power()[selectedLap()] > 0  -->

                <img class="inlineIcon" alt="Power" title="Power (w)" src="Images/power.png" />

                <span title="Average power (w)" data-bind="text: avg_power()[selectedLap()]"></span>

                <span title="Max power (w)" data-bind="text: max_power()[selectedLap()]"></span>

                <!-- /ko -->


                <!-- CADENCE/STRIDES -->

                <!-- ko if: avg_cadence()[selectedLap()] >= 0 || 
                            max_cadence()[selectedLap()] >= 0 ||  
                          total_cycles_strides()[selectedLap()] >=0 -->
                <img class="inlineIcon" alt="Cadence" title="Cadence" src="Images/cadence.png" />
                <!-- /ko -->

                <!-- ko if:  avg_cadence().length > 0  -->
                <span title="Average cadence" data-bind="text: avg_cadence()[selectedLap()]"></span>
                <!-- /ko -->

                <!-- ko if: max_cadence().length > 0  -->
                <span title="Max cadence" data-bind="text: max_cadence()[selectedLap()]"></span>
                <!-- /ko -->

                <!-- ko if: total_cycles_strides().length > 0  -->
                <span title="Total cycles/strides" data-bind="text: total_cycles_strides()[selectedLap()]"></span>

                <!-- /ko -->

                <!-- ASCENT/DESCENT -->

                <!-- ko if: total_ascent()[selectedLap()] >= 0  ||  total_descent()[selectedLap()] >= 0 -->

                <img class="inlineIcon" alt="Ascent/Descent" title="Ascent/Descent" src="Images/ascent.png" />

                <span title="Total ascent (m)" data-bind="text: total_ascent()[selectedLap()]"></span>

                <span title="Total descent (m)" data-bind="text: total_descent()[selectedLap()]"></span>

                <!-- /ko -->

                <!-- ko if: avg_temperature()[selectedLap()] >= 0  ||  max_temperature()[selectedLap()] >= 0  -->

                <img class="inlineIcon" alt="Temperature" title="Temperature (C)" src="Images/temperature.png" />

                <span title="Average temperature (C)" data-bind="text: avg_temperature()[selectedLap()]"></span>

                <span title="Max temperature (C)" data-bind="text: max_temperature()[selectedLap()]"></span>

                <!-- /ko -->

                <!-- ko if: lap_trigger  && lap_trigger()[selectedLap()] === 0 -->
                <img class="lapTrigger" src="Images/laptrigger/manual.png" title="LAP pressed" />
                <!-- /ko -->


                <!-- ko if: lap_trigger  && lap_trigger()[selectedLap()] === 1 -->
                <img class="lapTrigger" src="Images/laptrigger/time.png" title="Time" />
                <!-- /ko -->

                <!-- ko if: lap_trigger && lap_trigger()[selectedLap()] === 2 -->
                <img class="lapTrigger" src="Images/laptrigger/distance.png" title="Distance" />
                <!-- /ko -->

                <!-- ko if: lap_trigger  && lap_trigger()[selectedLap()] === 3 -->
                <img class="lapTrigger" src="Images/laptrigger/position_start.png" title="Position start" />
                <!-- /ko -->

                <!-- ko if: lap_trigger  && lap_trigger()[selectedLap()] === 4 -->
                <img class="lapTrigger" src="Images/laptrigger/position_lap.png" title="Position lap" />
                <!-- /ko -->

                <!-- ko if: lap_trigger && lap_trigger()[selectedLap()] === 5 -->
                <img class="lapTrigger" src="Images/laptrigger/position_waypoint.png" title="Position waypoint" />
                <!-- /ko -->

                <!-- ko if: lap_trigger  && lap_trigger()[selectedLap()] === 6 -->
                <img class="lapTrigger" src="Images/laptrigger/position_marked.png" title="Position marked" />
                <!-- /ko -->

                <!-- ko if: lap_trigger  && lap_trigger()[selectedLap()] === 7 -->
                <img class="lapTrigger" src="Images/laptrigger/session_end.png" title="Session end" />
                <!-- /ko -->





                <!-- /ko -->

            </div>
            <!-- /ko -->




            <section id="divLaps">



                <!-- <h4>Laps</h4>-->
                <!-- ko if: $root !== undefined && $root.timestamp !== undefined -->
                <section id="lapList" data-bind="foreach: timestamp">
                </section>
                <!-- /ko -->

                <!--<div data-bind="text: ko.toJSON($root)"></div>

            <hr/> -->

            </section>

            <div id="divMapWrapper">
                <div>
                    <img id="liveImage" data-bind="attr: { src: settingsVM.liveImage}" />
                </div>
                <!-- ko with: activityVM -->
                <div id="importedActivities">

                    <div style="margin-left:auto; margin-right:auto; font-weight:bold" data-bind="visible: activity().length === 0">Please import activities to explore</div>

                    <ul id="activityList" data-bind=" foreach: activity">

                        
                        <li class="newActivity" data-bind="style: { 'background-color': $parent.intenseActivity($data), attr: { title: 'Filename: ' + _headerInfo_.fitFile.name + ' Size: ' + _headerInfo_.fitFile.size + ' bytes' }}">
                           <!-- http://stackoverflow.com/questions/9261296/any-good-techniques-to-debug-template-binding-faults-for-knockout-js -->
                           <!-- <pre data-bind="text: ko.toJSON($data, null, 2)"></pre>-->
                                <a href="#" data-bind="click: $parent.showActivity.bind($index())">

                                    <!-- ko if: typeof (_staticGoogleMapSrc) !== "undefined" -->
                                    <img data-bind="attr: { src :  _staticGoogleMapSrc }" style="width: 100%; height:150px" />
                                    <!-- /ko -->
                                   
                                       
                                        <!-- ko if: typeof garminConnect !== "undefined" && typeof (garminConnect.activity) !== "undefined" -->
                                          <!-- ko if: typeof (garminConnect.activity.activityName) !== "undefined" -->
                                              <span style="display: block" data-bind="text: garminConnect.activity.activityName, attr: { title: garminConnect.activity.activityDescription }"></span>
                                          <!-- /ko -->
                                        
                                        <!-- /ko -->

                                        <!-- ko if: typeof (record) === "undefined" && typeof garminConnect !== "undefined" && typeof (garminConnect.activity) === "undefined"-->
                                        <span style="display: inline">No data.</span>
                                        <!-- /ko -->

                                       <!-- ko if: typeof session === "undefined" -->
                                            <span> No session info. available </span> 
                                            <!-- ko if: typeof (record) !== "undefined" && typeof (record.timestamp) !== "undefined" && record.timestamp.length > 0 -->
                                                <span data-bind="text: (new Date(record.timestamp[0])).toLocaleString()"></span>
                                            <!-- /ko -->
                                             
                                    <!-- /ko -->

                                    <!-- ko if: typeof session !== "undefined" -->
                                    
                                    <!-- ko with: session -->

                                    <!--  <div data-bind="text: ko.toJSON($parent.hrv)"></div>-->

                                        <!-- ko if: typeof sport !== "undefined" -->
                                            <ul id="sportList" data-bind="foreach: sport">

                                                <li style="display: inline" data-bind="with: $parent">
                                                    <div style="display: inline-block">

                                                        <!-- ko if: sport[$index()] === 1 -->
                                                            <img class="inlineIcon" alt="Running" title="Running" src="Images/sport/running.png" />
                                                        <!-- /ko -->

                                                        <!-- ko if: sport[$index()] === 2 -->
                                                            <img class="inlineIcon" alt="Cycling" title="Cycling" src="Images/sport/cycling.png" />
                                                        <!-- /ko -->

                                                        <!-- ko if: sport[$index()] === 5 -->
                                                            <img class="inlineIcon" alt="Swimming" title="Swimming" src="Images/sport/swimming.png" />
                                                        <!-- /ko -->

                                                        <!-- ko if: sport[$index()] !== 5 && sport[$index()]!== 2 && sport[$index()] !== 1 -->
                                                            <img class="inlineIcon" src="Images/sport/generic.png" data-bind="attr: { title: 'Sport is ' + sport[$index()],  alt: 'Sport is ' + sport[$index()] }" />
                                                        <!-- /ko -->

                                                        <!-- ko if: typeof start_time !== "undefined"  && start_time.length > 0 && typeof start_time[$index()] !== "undefined" -->
                                                            <span style="display: inline" data-bind="text: (new Date(start_time[$index()])).toLocaleString()"></span>
                                                        <!-- /ko -->

                                                        <!-- ko if: typeof total_distance !== "undefined" && total_distance.length > 0  -->
                                                             <img class="inlineIcon" alt="Total distance" title="Total distance" src="Images/total_distance.png" />

                                                            <!-- ko if: total_distance[$index()] >= 0 && total_distance[$index()] < 1000 -->
                                                                <span class="sessionTOTALDISTANCE" title="Total distance" data-bind="text: total_distance[$index()].toFixed(0) + ' m'"></span>
                                                            <!-- /ko -->

                                                            <!-- ko if: total_distance[$index()] >= 1000 -->
                                                                <span class="sessionTOTALDISTANCE" title="Total distance" data-bind="text: (total_distance[$index()] / 1000).toFixed(2) + ' km'"></span>
                                                            <!-- /ko -->
                                                        <!-- /ko -->

                                                         <!-- ko if: typeof total_distance === "undefined" -->
                                                            <!-- In case only HR and speed data, i.e indoor cycling without speed/cadence sensor -->
                                                            <img class="inlineIcon" alt="Total distance not measured" title="Total distance not measured" src="Images/total_distance.png" />!
                                                         <!-- /ko -->

                                                         <!-- ko if: typeof num_laps !== "undefined" && num_laps[$index()] >= 0 -->
                                                                <img class="inlineIcon" alt="Number of laps" title="Number of laps" src="Images/number_of_laps.png" />
                                                                <span class="sessionTOTALDISTANCE" title="Number of laps" data-bind="text: num_laps[$index()].toFixed(0)"></span>
                                                         <!-- /ko -->

                                                        <!-- ko if: typeof (avg_heart_rate) !== "undefined" && avg_heart_rate[$index()] >= 0 || typeof (max_heart_rate) !== "undefined" && max_heart_rate[$index()] >= 0 -->
                                                            <img class="inlineIcon" alt="Heart rate" title="bpm" src="Images/heart.png" />

                                                            <!-- ko if:  avg_heart_rate[$index()]  >= 0 -->
                                                                <span title="Average heart rate (bpm)" data-bind="text: avg_heart_rate[$index()]"></span>
                                                            <!-- /ko -->

                                                            <!-- ko if: max_heart_rate[$index()] >= 0 -->
                                                                <span title="Max heart rate (bpm)" data-bind="text: max_heart_rate[$index()]"></span>
                                                            <!-- /ko -->

                                                        <!-- /ko -->

                                                        <!-- ko with: $parents[2] -->
                                                            <!-- ko if: typeof (hrv) !== "undefined" && typeof (hrv.time) !== "undefined" && hrv.time.length > 0 -->
                                                                 <img class="inlineIcon" alt="HRV" title="HRV - heart rate variability. RR-interval data. Time in ms. between each heartbeat. It varies with expiration/inspiration." src="Images/hrv.png" />
                                                                 <span data-bind="text: hrv.time.length,attr: { title: 'Contains ' + hrv.time.length + ' heart rate variability measurements' } "></span>
                                                            <!-- /ko -->
                                                        <!-- /ko -->

                                                        <!-- ko if: (typeof (total_calories) !== "undefined" && total_calories.length > 0 && total_calories[$index()] > 0) ||
                                                            (typeof (total_fat_calories) !== "undefined" && total_fat_calories.length > 0 && total_fat_calories[$index()] > 0) -->
                                                        <img class="inlineIcon" alt="kilo calorie" title="kcal" src="Images/kcalorie.png" />

                                                        <span title="Total calories (kcal)" data-bind="text: total_calories[$index()]"></span>
                                                             <!-- ko if: typeof total_timer_time[$index()] !== "undefined" && total_timer_time[$index()] > 0 -->
                                                                   <img class="inlineIcon" alt="Watt (J/s)" title="Watt (J/s)" src="Images/watt.png" />
                                                                   <span title="Watt" data-bind="text: (total_calories[$index()]* 1000 * 4.1868 / total_timer_time[$index()]).toFixed(1)"></span>
                                                            <!-- /ko -->
                                                            <!-- ko if: (typeof (total_fat_calories) !== "undefined" && total_fat_calories.length > 0 && total_fat_calories[$index()] > 0) -->
                                                                <span title="Total fat calories (kcal)" data-bind="text: total_fat_calories[$index()]"></span>
                                                                <img class="inlineIcon" alt="Watt (J/s)" title="Watt (J/s)" src="Images/watt.png" />
                                                                   <span title="Watt" data-bind="text: (total_fat_calories[$index()] * 1000 * 4.1868 / total_timer_time[$index()]).toFixed(1)"></span>
                                                            <!-- /ko -->
                                                        <!-- /ko -->


                                                        <!-- ko if: typeof (total_training_effect) !== "undefined" &&  total_training_effect[$index()] >= 1 -->
                                                            <span title="Training Effect">TE</span>
                                                            <span data-bind="text: total_training_effect[$index()]" title="Training Effect"></span>

                                                            <!-- meter tag ignored in  IE 10, but works in Chrome -->
                                                            <meter title="Training effect" style="padding-left: 5px; padding-bottom: 6px" high="4" low="1.5" min="1" max="5" data-bind="value: total_training_effect[$index()]"></meter>
                                                        <!-- /ko -->
                                                    </div>
                                                </li>

                                            </ul>
                                         <!-- /ko -->
                                    <!-- /ko -->

                                    <!-- /ko -->

                                    </a>
                           

                        </li>

                    </ul>

               </div>
                 <!-- /ko -->

                <div id="activityMap"></div>
               
            </div>

        </div>

        <div id="divChartWrapper">

            <div id="multiChart"></div>
            

        </div>

         <div id="zonesChart"></div>

        <div id="lapChart"></div>

        <div id="weeklyCaloriesChart"></div>

         <div id="intensityChart"></div>

        <div id="divPoincareChart"></div>

        <div id="divMsgMap"></div>


    </div>

</body>

</html>
